<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è!</title>

    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            color: #fff;
            background-color: #000; /* Fallback */
            display: flex; /* For centering screens */
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            transition: background-image 1s ease-in-out;
            z-index: -1;
            /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–µ –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. */
            background-image: url('e1219cd97fa4d1638c1aa9338a2db4b1.gif'); /* –ü—Ä–∏–º–µ—Ä GIF —Ñ–æ–Ω–∞ - –∑–∞–º–µ–Ω–∏–ª –Ω–∞ GIF –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ */
        }

        .screen {
            position: absolute; /* Changed from absolute to fixed relative to body */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease-in-out;
            box-sizing: border-box;
            padding: 20px;
        }

        .screen.active {
            opacity: 1;
            pointer-events: auto;
        }

        #initial-screen {
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 3em;
            font-weight: bold;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
            font-family: 'Pacifico', cursive;
        }

        #cake-screen h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            font-family: 'Caveat', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
                    position: relative;
        top: -30px; /* –ü–æ–¥–Ω–∏–º–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å —Ç–æ—Ä—Ç–æ–º –Ω–∞ 30px –≤–≤–µ—Ä—Ö */

        }

        #cake-elements-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 50px;
            margin-top: -50px; /* Adjust if needed */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        #cake-image {
            max-width: 50%;
            max-height: 70vh;
            border-radius: 15px;
            pointer-events: auto;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        #cake-image:hover {
            transform: scale(1.02);
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.9);
        }

        #rotating-gift-image {
            opacity: 0;
            transform: scale(0.5);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            max-width: 30%;
            max-height: 50vh;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.7));
        }

        #rotating-gift-image.visible {
            opacity: 1;
            transform: scale(1);
            animation: spin 1s linear 1; /* 3 —Å–µ–∫—É–Ω–¥—ã, –ª–∏–Ω–µ–π–Ω–æ, 5 —Ä–∞–∑ */
        }

        @keyframes spin {
            from { transform: rotate(0deg) scale(1); }
            to { transform: rotate(360deg) scale(1); }
        }

        #message-screen {
            background-color: rgba(0, 0, 0, 0.4);
        }

        #congratulation-content {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            max-width: 90%;
            gap: 30px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            transition: opacity 0.5s ease-in-out;
            box-sizing: border-box;
            flex-wrap: wrap;
            cursor: default; /* For messages, not clickable as a whole */
        }

        #congratulation-text-container {
            flex: 1;
            min-width: 300px;
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }

        #congratulation-text-container.hidden {
            opacity: 0;
            pointer-events: none;
        }

        #congratulation-image {
            max-width: 300px;
            max-height: 300px;
            width: auto;
            height: auto;
            border-radius: 10px;
            object-fit: contain; /* Ensure image fits well */
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
        }

        #congratulation-text-container h2 {
            font-family: 'Pacifico', cursive;
            font-size: 2.2em;
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        #message-text {
            font-family: 'Caveat', cursive;
            font-size: 1.5em;
            line-height: 1.6;
            min-height: 100px; /* To prevent layout shift */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            margin-top: 10px;
        }

        #message-controls {
            margin-top: 30px;
            display: flex;
            gap: 20px;
        }

        .action-button {
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            background-color: #ff69b4; /* Hot pink */
            color: #fff;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            font-family: 'Arial', sans-serif;
letter-spacing: 0.5px;
        }

        .action-button:hover {
            background-color: #ff4a9e; /* Darker pink */
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }

        .action-button:active {
            transform: translateY(0);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        #gift-button {
            background-color: #8a2be2; /* Blue violet */
        }
        #gift-button:hover {
            background-color: #7b22d1;
        }

        #gift-screen, #final-screen {
            background-color: rgba(0, 0, 0, 0.5);
        }

        #gift-container, #final-message-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 30px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.6);
            max-width: 90%;
            box-sizing: border-box;
        }

        #opened-gift-image, #final-message-image {
            max-width: 80%;
            max-height: 50vh;
            border-radius: 15px;
            object-fit: contain;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        #gift-message, #final-message-text {
            font-family: 'Caveat', cursive;
            font-size: 1.8em;
            text-align: center;
            line-height: 1.5;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        #final-message-text {
            font-family: 'Pacifico', cursive;
            font-size: 2.5em;
            color: #ffd700; /* Gold color for final message */
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
        }

        #music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            color: #fff;
            border: 2px solid #fff;
            font-size: 1.5em;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, border-color 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        #music-control:hover {
            background-color: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
            border-color: #ff69b4;
        }

        #music-control.playing {
            background-color: rgba(255, 105, 180, 0.5); /* Pink when playing */
        }

         @media (max-width: 768px) {
            #initial-screen {
                font-size: 2em;
            }
            #cake-screen h2 {
                font-size: 1.8em;
            }
            #cake-elements-container {
                flex-direction: column;
                gap: 20px;
            }
            #cake-image {
                max-width: 80%;
            }
            #rotating-gift-image {
                max-width: 50%;
            }
            #congratulation-content {
                flex-direction: column;
                max-width: 95%;
                gap: 15px;
                padding: 15px;
            }
            #congratulation-image {
                max-width: 200px;
                max-height: 200px;
            }
            #congratulation-text-container {
                min-width: unset;
                width: 100%;
            }
            #congratulation-text-container h2 {
                font-size: 1.8em;
            }
            #message-text {
                font-size: 1.2em;
                min-height: 80px;
            }
            #message-controls {flex-direction: column;
                gap: 15px;
                width: 100%;
            }
            .action-button {
                padding: 12px 20px;
                font-size: 1em;
                width: 100%;
            }
            #gift-container, #final-message-container {
                padding: 20px;
            }
            #opened-gift-image, #final-message-image {
                max-width: 90%;
            }
            #gift-message, #final-message-text {
                font-size: 1.4em;
            }
            #final-message-text {
                font-size: 2em;
            }
            #music-control {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
                bottom: 15px;
                right: 15px;
            }
        }
    </style>
</head>
<body>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–º–µ–Ω—ã —Ñ–æ–Ω–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <div id="background-container"></div>

    <!-- –ê—É–¥–∏–æ –ø–ª–µ–µ—Ä –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏ -->
    <audio id="background-music" loop>
        <source src="–ò—Ä–∏–Ω–∞ –ê–ª–ª–µ–≥—Ä–æ–≤–∞ - –° –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è.mp3" type="audio/mpeg">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
    </audio>

    <!-- –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–æ–π -->
    <div id="music-control">
        &#9835; <!-- –ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –Ω–æ—Ç–∞ -->
    </div>

    <!-- 1. –ù–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="initial-screen" class="screen active">
        –° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è! –ù–∞–∂–º–∏, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å üéâ
    </div>

    <!-- 2. –≠–∫—Ä–∞–Ω —Å —Ç–æ—Ä—Ç–æ–º -->
    <div id="cake-screen" class="screen">
        <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –ó–∞–¥—É–π —Å–≤–µ—á–∏ –∏ –∑–∞–≥–∞–¥–∞–π –∂–µ–ª–∞–Ω–∏–µ!</h2>
        <div id="cake-elements-container">
            <img id="cake-image" src="8fd1a752307eb9fd5cb566cff1b52bb7.png" alt="–¢–æ—Ä—Ç —Å —Å–≤–µ—á–∞–º–∏">
            <img id="rotating-gift-image" src="photo_2025-12-04_22-09-01.jpg" alt="–í—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–¥–∞—Ä–æ–∫">
        </div>
        <div id="message-controls">
            <button id="light-candles-button" class="action-button">–ó–∞–¥—É—Ç—å —Å–≤–µ—á–∏!</button>
        </div>
    </div>

    <!-- 3. –≠–∫—Ä–∞–Ω —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ -->
    <div id="message-screen" class="screen">
        <div id="congratulation-content">
            <img id="congratulation-image" src="photo_2025-12-04_22-03-56.jpg" alt="–ü–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
            <div id="congratulation-text-container">
                <h2 id="congratulation-title">–° –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!</h2>
                <p id="message-text">–ü–æ–¥–æ–∂–¥–∏—Ç–µ, —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</p>
            </div>
        </div>
        <div id="message-controls">
            <button id="next-message-button" class="action-button">–î–∞–ª–µ–µ</button>
            <button id="gift-button" class="action-button" style="display: none;">–û—Ç–∫—Ä—ã—Ç—å –ø–æ–¥–∞—Ä–æ–∫!</button>
        </div>
    </div>

    <!-- 4. –≠–∫—Ä–∞–Ω —Å –ø–æ–¥–∞—Ä–∫–æ–º (–æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –ø–æ–¥–∞—Ä–æ–∫") -->
    <div id="gift-screen" class="screen">
        <div id="gift-container">
            <img id="opened-gift-image" src="e1219cd97fa4d1638c1aa9338a2db4b1.gif" alt="–û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ–¥–∞—Ä–æ–∫">
            <p id="gift-message">–≠—Ç–æ —Ç–≤–æ–π –ø–æ–¥–∞—Ä–æ–∫! –ù–∞–¥–µ—é—Å—å, –æ–Ω —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è!</p>
            <button id="continue-from-gift" class="action-button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
        </div>
    </div>

    <!-- 5. –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="final-screen" class="screen">
        <div id="final-message-container">
            <img id="final-message-image" src="e1219cd97fa4d1638c1aa9338a2db4b1.gif" alt="–§–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
            <p id="final-message-text">–° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è! –ñ–µ–ª–∞—é —Å—á–∞—Å—Ç—å—è, –∑–¥–æ—Ä–æ–≤—å—è –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∂–µ–ª–∞–Ω–∏–π!</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ==================== –≠–ª–µ–º–µ–Ω—Ç—ã DOM ====================
            const backgroundContainer = document.getElementById('background-container');
            const initialScreen = document.getElementById('initial-screen');
            const cakeScreen = document.getElementById('cake-screen');
            const messageScreen = document.getElementById('message-screen');
            const giftScreen = document.getElementById('gift-screen');
            const finalScreen = document.getElementById('final-screen');

            const cakeImage = document.getElementById('cake-image');
            const rotatingGiftImage = document.getElementById('rotating-gift-image');
            const lightCandlesButton = document.getElementById('light-candles-button');

            const congratulationImage = document.getElementById('congratulation-image');
            const congratulationTitle = document.getElementById('congratulation-title');
            const messageText = document.getElementById('message-text');
            const nextMessageButton = document.getElementById('next-message-button');
            const giftButton = document.getElementById('gift-button');
            
            const openedGiftImage = document.getElementById('opened-gift-image');
            const giftMessage = document.getElementById('gift-message');
            const continueFromGiftButton = document.getElementById('continue-from-gift');

            const finalMessageImage = document.getElementById('final-message-image');
            const finalMessageText = document.getElementById('final-message-text');

            const backgroundMusic = document.getElementById('background-music');
            const musicControl = document.getElementById('music-control');

            // ==================== –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è ====================
            let currentScreenId = 'initial-screen';
            let currentMessageIndex = 0;
            let cakeLit = false;
            let isMusicPlaying = false;
            let typewriterEffectInstance = null; // –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–º –ø–µ—á–∞—Ç–∏

            const screens = {
                'initial-screen': initialScreen,
                'cake-screen': cakeScreen,
                'message-screen': messageScreen,
                'gift-screen': giftScreen,
                'final-screen': finalScreen
            };

            const backgroundImages = [
               
                'e1219cd97fa4d1638c1aa9338a2db4b1.gif' // –ò –µ—â–µ
                // –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ GIF –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            ];
            let currentBgIndex = 0;

            const messages = [
                {
                    title: "–ú–æ—è –¥–æ—Ä–æ–≥–∞—è!",
                    text: "–°–µ–≥–æ–¥–Ω—è –æ—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å, –∏ —è —Ö–æ—á—É, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –Ω–∞–ø–æ–ª–Ω–µ–Ω —Ä–∞–¥–æ—Å—Ç—å—é, —Å–º–µ—Ö–æ–º –∏ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏, –ø—Ä—è–º –∫–∞–∫ –Ω–∞ —Ç–≤–æ–µ 18-–ª–µ—Ç–∏–µ!",
                    image: "photo_2025-12-04_22-02-54.jpg"
                },
                {
                    title: "–ñ–µ–ª–∞—é —Ç–µ–±–µ...",
                    text: "–ë–æ–ª—å—à–µ —è—Ä–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –≤ —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏, —Å–¥–∞—Ç—å —Å–µ—Å—Å–∏–∏ –Ω–∞ 5 –∏ —á—Ç–æ–± –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≥—Ä—É—Å—Ç–∏–ª–∞ =3",
                    image: "photo_2025-12-04_22-03-56.jpg"
                },
                {
                    title: "–ü–æ–º–Ω–∏ –æ –≥–ª–∞–≤–Ω–æ–º!",
                    text: "–Ø –ª—é–±–ª—é, —Ü–µ–Ω—é –∏ –¥–æ—Ä–æ–∂—É —Ç–µ–±—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—ã –ø–æ—Å—Ç–∞—Ä–µ–ª–∞ –Ω–∞ —Ü–µ–ª—ã–π –≥–æ–¥!",
                    image: "photo_2025-12-05_13-06-47.jpg"
                },
                {
                    title: "–ï—â—ë —Ä–∞–∑ —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è!",
                    text: "–ù–æ –∫–∞–∫–æ–µ –∂–µ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –±–µ–∑ –ø–æ–¥–∞—Ä–∫–æ–≤? –ü—Ä–∏–≥–æ—Ç–æ–≤—å—Å—è –∫ —Å—é—Ä–ø—Ä–∏–∑—É!",
                    image: "photo_2025-12-04_22-06-37.jpg",
                    action: "show_gift_button" // –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
                }
            ];

            // ==================== –§—É–Ω–∫—Ü–∏–∏ ====================

            function showScreen(id) {
                Object.values(screens).forEach(screen => {
                    screen.classList.remove('active');
                });
                screens[id].classList.add('active');
                currentScreenId = id;
            }

            function changeBackground() {
                currentBgIndex = (currentBgIndex + 1) % backgroundImages.length;
                backgroundContainer.style.backgroundImage = `url('${backgroundImages[currentBgIndex]}')`;
            }

            function playAudio() {
                backgroundMusic.play().then(() => {
                    isMusicPlaying = true;
                    musicControl.classList.add('playing');
                    musicControl.innerHTML = '&#10074;&#10074;'; // –ò–∫–æ–Ω–∫–∞ –ø–∞—É–∑—ã
                }).catch(error => {
                    console.error("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –º—É–∑—ã–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:", error);
                    // –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É "–†–∞–∑—Ä–µ—à–∏—Ç—å –∑–≤—É–∫"
                });
            }

            function pauseAudio() {
                backgroundMusic.pause();
                isMusicPlaying = false;
                musicControl.classList.remove('playing');
                musicControl.innerHTML = '&#9835;'; // –ò–∫–æ–Ω–∫–∞ –Ω–æ—Ç—ã
            }

            function toggleMusic() {
                if (isMusicPlaying) {
                    pauseAudio();
                } else {
                    playAudio();
                }
            }

            function typeWriterEffect(element, text, speed, callback) {
                let i = 0;
                element.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
                typewriterEffectInstance = setInterval(() => {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(typewriterEffectInstance);
                        typewriterEffectInstance = null;
                        if (callback) callback();
                    }
                }, speed);
            }

            function stopTypeWriterEffect() {
                if (typewriterEffectInstance) {
                    clearInterval(typewriterEffectInstance);
                    typewriterEffectInstance = null;
                }
            }

            function startBirthdaySequence() {
                showScreen('cake-screen');
                setInterval(changeBackground, 7000); // –ú–µ–Ω—è–µ–º —Ñ–æ–Ω –∫–∞–∂–¥—ã–µ 7 —Å–µ–∫—É–Ω–¥// –ê—É–¥–∏–æ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ –ø–æ –ø–µ—Ä–≤–æ–º—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é
            }

            function lightCandles() {
                if (!cakeLit) {
                    // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–¥—É–≤–∞–Ω–∏—è —Å–≤–µ—á–µ–π (–º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ—Ä—Ç–∞, –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é)
                    // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Ç–æ—Ä—Ç –±–µ–∑ —Å–≤–µ—á–µ–π –∏–ª–∏ —Å –¥—ã–º–æ–º
                    cakeImage.src = "8fd1a752307eb9fd5cb566cff1b52bb7.png"; // –¢–æ—Ä—Ç –±–µ–∑ —Å–≤–µ—á–µ–π
                    cakeImage.alt = "–¢–æ—Ä—Ç –±–µ–∑ —Å–≤–µ—á–µ–π";
                    
                    rotatingGiftImage.classList.add('visible'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–¥–∞—Ä–æ–∫
                    lightCandlesButton.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ó–∞–¥—É—Ç—å —Å–≤–µ—á–∏"
                    nextMessageButton.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–î–∞–ª–µ–µ"
                    
                    cakeLit = true;
                    setTimeout(() => {
                        // –ü–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Ç–æ—Ä—Ç–∞ –∏ –ø–æ–¥–∞—Ä–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º
                        showScreen('message-screen');
                        displayMessage();
                    }, 4000); // 5 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–¥–∞—Ä–æ–∫
                }
            }

            function displayMessage() {
                stopTypeWriterEffect(); // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –ø–µ—á–∞—Ç–∏, –µ—Å–ª–∏ –µ—Å—Ç—å

                if (currentMessageIndex >= messages.length) {
                    showFinalMessage();
                    return;
                }

                const message = messages[currentMessageIndex];

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                congratulationTitle.textContent = message.title;
                congratulationImage.src = message.image;
                
                // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã –ø–ª–∞–≤–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
                messageText.style.opacity = 0; 
                setTimeout(() => {
                    typeWriterEffect(messageText, message.text, 50, () => {
                        // –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—á–∞—Ç–∏, –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏
                        if (message.action === "show_gift_button") {
                            giftButton.style.display = 'inline-block';
                            nextMessageButton.style.display = 'none'; // –ú–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å "–î–∞–ª–µ–µ", —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª –ø–æ–¥–∞—Ä–æ–∫
                        } else {
                            giftButton.style.display = 'none';
                            nextMessageButton.style.display = 'inline-block';
                        }
                    });
                    messageText.style.opacity = 1;
                }, 300); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞

                currentMessageIndex++;
            }

            function openGift() {
                showScreen('gift-screen');
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞
                openedGiftImage.src = "1351231_1740258984_6934fea9-fca4-48a6-8852-8a546e1884fe.jpg"; // –ü—Ä–∏–º–µ—Ä –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–¥–∞—Ä–∫–∞ GIF
                giftMessage.textContent = "–¢–≤–æ–π –ø–æ–¥–∞—Ä–æ–∫! –ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –±—É–¥–µ—à—å –º–∞–º–æ–π!";
            }

            function showFinalMessage() {
                showScreen('final-screen');
                finalMessageImage.src = "https://i.gifer.com/1B9R.gif"; // –ü—Ä–∏–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ GIF
                finalMessageText.textContent = "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –ø–æ–ª–æ–Ω —Å–º–µ—Ö–∞, –ª—é–±–≤–∏ –∏ —Å—á–∞—Å—Ç—å—è! –° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è!";
                // –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–º–µ–Ω—É —Ñ–æ–Ω–∞, –µ—Å–ª–∏ —ç—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
                // clearInterval(backgroundInterval); 
            }

            // ==================== –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π ====================

            initialScreen.addEventListener('click', () => {
                startBirthdaySequence(
);
                if (!isMusicPlaying) {
                    playAudio(); // –ó–∞–ø—É—Å–∫–∞–µ–º –º—É–∑—ã–∫—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
                }
            });

            lightCandlesButton.addEventListener('click', lightCandles);

            nextMessageButton.addEventListener('click', displayMessage);

            giftButton.addEventListener('click', openGift);

            continueFromGiftButton.addEventListener('click', () => {
                showScreen('message-screen');
                displayMessage(); // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
            });

            musicControl.addEventListener('click', toggleMusic);

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –ø–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω
            showScreen('initial-screen');
            nextMessageButton.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–î–∞–ª–µ–µ" –¥–æ –∑–∞–¥—É–≤–∞–Ω–∏—è —Å–≤–µ—á–µ–π
        });
    </script>
</body>
</html>

